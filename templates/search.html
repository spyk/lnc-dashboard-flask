<!DOCTYPE html>
<html>
<head>
    <title>Search</title>
    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1>Search</h1>
        <form method="POST">
            <div class="form-group">
                <label for="query">Search:</label>
                <input type="text" class="form-control" id="query" name="query" value="{{ query }}">
            </div>

            <div class="form-group">
                <label for="search_type">Search Type:</label>
                <select class="form-control" id="search_type" name="search_type">
                    <option value="BM25" {% if search_type == 'BM25' %}selected{% endif %}>BM25</option>
                    <option value="vector" {% if search_type == 'vector' %}selected{% endif %}>Vector</option>
                </select>
            </div>

            <div class="form-group">
                <label for="filters">Filters:</label>
                <select class="form-control" id="filters" name="filters">
                    <option value="date" {% if filters == 'date' %}selected{% endif %}>Date</option>
                    <option value="feed" {% if filters == 'feed' %}selected{% endif %}>Feed</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary">Search</button>
        </form>
    </div>

    <div class="container">
    <!-- ...existing form code... -->

    {% if tokens %}
    <div class="mt-5">
        <table>
            <tr>
                <th>Model Tokenizer output: </th>
                <td>{{ tokens|join(', ') }}</td>
            </tr>
        </table>
    </div>
    {% endif %}

    {% if vector_results %}
    <div class="mt-5">
        <h2>Results Vector Search</h2>
        <p>QTime:{{vector_results['qtime']}}</p>
        <p>Total Results:{{vector_results['hits']}}</p>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Score</th>
                    <th>Title</th>
                    <th>Feed</th>
                    <th>Created_At</th>
                </tr>
            </thead>
            <tbody>
                {% for result in vector_results %}
                <tr>
                    <td>{{ result.id }}</td>
                    <td>{{ result.score }}</td>
                    <td>{{ result.feed }}</td>
                    <td>{{ result.title }}</td>
                    <td>{{ result.created_at }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    {% if bm25_results %}
    <div class="mt-5">
        <h2>Results BM25</h2>
        <p>QTime:{{bm25_results['qtime']}}</p>
        <p>Total Results:{{bm25_results['hits']}}</p>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Score</th>
                    <th>Title</th>
                    <th>Feed</th>
                    <th>Created_At</th>
                </tr>
            </thead>
            <tbody>
                {% for result in bm25_results %}
                <tr>
                    <td>{{ result.id }}</td>
                    <td>{{ result.score }}</td>
                    <td>{{ result.feed }}</td>
                    <td>{{ result.title }}</td>
                    <td>{{ result.created_at }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
</div>

    <!-- JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>
